---
title: "Net Present Value (NPV) for Deworming"
date: "10 October, 2019"
output:
  html_document:
    code_folding: hide
    code_download: true
    collapsed: yes
    keep_md: yes
    number_sections: yes
    smooth_scroll: no
    toc: yes
    toc_depth: 3
    toc_float: yes
  pdf_document: default
  word_document: default
editor_options:
  chunk_output_type: console
pdf_document:
  extra_dependencies: ["xcolor"]
---
\def\blue{\color{blue}}
\def\red{\color{red}}






```r
################
#####  Notes:
################
### Source ---------->  Input ---------->  Model ---------->  Policy Estimates (output)
###  (_so)              (_in)              (_mo)                (_pe)
### values            functions          functions              values
###                   & values           & values             
# - call_sources_f- tax_elasticity_in_f  - tax_revenue_mo_f     - ten_year_revenue_pe
# - policy_f      - est_billionares_in_f - total_rev_mo_f       - ten_year_top_tax_pe
#                                        - ten_years_mo_f       - total_rev_pe
### arguments in functions should use "_var" and functions should use "_f"


# DESCRIBE FUNCTIONS STRUCTURE
# - inputs: list
# - outputs: list
#### function:  
#sample_function_f <- function(){
##########################################
##########################################  
#
#
##########################################
##########################################  
#    return( )                                  # A list with all (most?) the elements
#}                                              # generated inside the function
#invisible( list2env(sample_function_f(),.GlobalEnv) )
#
```


```r
library(readxl)

call_params_f <- function(){
    #############
    ##### Data  
    #############
    gov_bonds_so <- 	0.1185	     #Kenyan interest on sovereign debt - Central Bank of Kenya
    inflation_so <-   0.02         #Kenyan inflation rate - World Bank Development Indicators
    coverage_so  <-   0.681333333  #(R) Fraction of treated primary school students within 6 km - from W@W - see note
    tax_so <-         0.16575      #ADD INFO!
    ex_rate_so <- 85               #Exchange Rate - Central Bank of Kenya
    unit_cost_local_so <- 43.66    #Deworm the World
    years_of_treat_so <- 2.41      #Additional Years of Treatment - Table 1, Panel A

    # Add costs data
    #df_costs_so <- read_excel("rawdata/data/DtW Cost per Child Data.xlsx", sheet = "DtW Costs")
    # Add crosswalk data on region and country
    #df_costs_cw_so <- read_excel("rawdata/data/DtW Cost per Child Data.xlsx", sheet = "state_country")

    # Add data on number of treated children
    #df_counts_so <- read_excel("rawdata/data/DtW Cost per Child Data.xlsx", sheet = "DtW Treatment #s")

    #############
    ##### Research
    #############    
    lambda1_so <- c(87, 83, 81)    # Direct treatment effect on earnings. From tables generated by Michelle on 10/4/19
    lambda2_so <- c()              # Spillover treatment effect on earnings. FILL THIS IN
    q_full_so <- 0.75              #Take up rates with full subsidy. From Miguel and Kremmer (2007)
    q_zero_so <- 0                 #Take up rates with zero subsidy. From Miguel and Kremmer (2007)
    delta_ed_so <- c(-0.00176350949079451, 0.00696052250263997, 0.0258570306763183,     # (Delta E) Additional direct seconday schooling increase (from Joan)
                        0.0239963665555466, 0.027301406306074, 0.0234125454594173,
                       0.0279278879439199, 0.00647044449446303, 0.00835739437790601)                                     
    delta_ed_so <- cbind(delta_ed_so, 1999:2007)
    delta_ed_ext_so <- c(-0.0110126908021048,	0.0140448546741008,	-0.0034636291545585,  #Additional externality secondary schooling increase (from Joan)
                           0.0112940214439477,	0.0571608179771775,	-0.0560546793186931,
                           0.0558284756343451,	0.1546264843901160,	0.0055961489945619)
    delta_ed_ext_so <- cbind(delta_ed_ext_so, 1999:2007)  
    #include_ext_so <- TRUE

    #############
    ##### Guess work   
    #############
    periods_so <- 50               #Total number of periods to forecast wages
    time_to_jm_so <- 10            #Time from intial period until individual join the labor force
    teach_sal_so <- 5041           #Yearly secondary schooling compensation	5041 - from ROI materials
    teach_ben_so <- 217.47         #Yearly secondary schooling teacher benefits	217.47
    n_students_so <- 45            #Average pupils per teacher	45
    
    return( sapply( ls(pattern= "_so\\b"), function(x) get(x)) )
}
invisible( list2env(call_params_f(),.GlobalEnv) )
```

# Main Equation (the model)

\begin{equation}
NPV = \underbrace{\tau \underbrace{\sum_{t=0}^{50}\Big(\frac{1}{1+r}\Big)^t\Delta Y_{t}}_\text{sum of discounted earnings gains over time} - \underbrace{K \sum_{t=0}^{50}\Big(\frac{1}{1+r}\Big)^t \Delta \bar{E}_{\gamma t}(S1, S2)}_\text{sum of discounted cost of schooling over time}}_\text{net benefit of deworming over time} - \underbrace{(S_2Q(S_2) - S_1Q(S_1))}_\text{cost of deworming meds}
\label{eq:1}
\tag{1}
\end{equation}

